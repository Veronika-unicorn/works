# Front-end starter-kit

## Общее

- БЭМ (именование классов), Sass, Gulp;  
- Используется код-гайд [htmlacademy](https://codeguide.academy/).  


## Файловая структура

```bash
build/     # Папка сборки
fonts/     # Шрифты
img/       # Изображения (оптимизированные)
src/       # Исходники
```

## Команды

```bash
npm i                  # Установка всех необходимых зависимостей
npm start              # Запуск сервера разработки (либо команда gulp)
npm test               # Проверка всех scss- и js-файлов на соответствие правилам (см. .stylelintrc и .eslintrc соответственно)
npm run test:style     # Проверить только scss-файлы
npm run test:js        # Проверить только js-файлы
npm run test-fix       # Исправление ошибок валидации scss- и js-файлов
npm run test:style-fix # Исправление только scss-файлов
npm run test:js-fix    # Исправление только js-файлов
```

## Как работает

При `npm start` запускается дефолтная задача gulp:  
1. Очищается папка сборки (`build/`).  
2. Части разметки (`src/html/`) объединяются, проверяются на валидность и добавляются в папку сборки.  
3. Инициализируется sourcemap для стилей, компилируется scss, группируются медиавыражения, файлы стилей сохраняются в папку сборки.  
4. Файлы скриптов копируются в папку сборки.  
5. Происходит минификация файлов стилей и скриптов в `build/`, добавляется суффикс '.min', сохраняются в ту же папку (`build/`).  
6. В `build/css/critical.css` и `build/css/critical.min.css` заменяются url к файлам шрифтов и изображений, для удобного встраивания в `<style>`. Также в `gulpfile.js` в переменной `basePath` нужно указать необходимый путь для построения корректного url.  
7. Запускается задача `watch`:  
    - следит за изменениями в:  
        - `src/html/`  
        - `src/scss/`  
        - `src/js/`  
        - `*.html`  
    - запускает необходимые задачи при изменении файлов.  
8. При внесении изменений, страница автоматически перезагружается.  
9. Для оптимизации изображений необходимо запускать таск `gulp img-min`. Оптимизированные изображения сохраняются в `img/`.  
10. Для генерации изображений в формате `.webp` необходимо запустить задачу `gulp img-webp`. Изображения создаются на основе оптимизированной графики в папке `img/` и сохраняются в папку `img/webp`.  
11. Можно использовать задачу `gulp img` которая сначала запустит `gulp img-min`, а после `gulp img-webp`. Если на проекте нет необходимости использовать графику в формате `.webp`, то можно пользоваться только задачей `gulp img-min`.  

## Разметка

Повторяющиеся части (такие, как header и footer) располагаются в `src/html/parts/`.  
Уникальные, для каждой страницы, на уровень выше `src/html/`.  
Непосредственно в них подключаются header, footer и т.п.  

## Стили

Все стили располагаются в `src/scss/`. Для каждого компонента или блока создается отдельный scss-файл.  
- `src/scss/helpers/` - переменные и миксины.  
- `src/scss/base/` - базовые стили.  
- `src/scss/components/` - отдельные встраиваемые компоненты, виджеты и т.п.  
- `src/scss/layout/` - блоки, такие как header, footer.  
- `src/scss/pages/` - (опционально) стили, уникальные для конкретной страницы.  
- `src/scss/other/` - (опционально) стили, не соответствующие категориям выше (анимация, которая используется для нескольких независимых блоков, классы хелперы и т.д.).  
- `src/scss/template.scss` - главный стилевой файл, в который импортируются все компоненты.  

### Стилевой код-гайд

1. БЭМ-именование: `__` — разделитель элемента, `--` — разделитель модификатора.  
2. Для каждого блока создается отдельный файл стилей.  
3. Очередность селекторов:  
    - Стилевые правила сущности.  
    - Медиаусловия.  
    - Псевдоселекторы и псевдоэлементы.  
    - Сторонние вложенные селекторы.  
    - Элементы блока.  
    - Модификаторы блока.  

## Скрипты

`src/js/` - файлы со скриптами.  

## GIT

`.gitconfig` - прописаны алиасы для git-команд.  
`.gitignore` - указаны папки и файлы, которые будут игнорироваться.  

## Линтинг

Для проверки кода на ошибки и соответствие код-гайдам используются конфиги [htmlacademy](https://github.com/htmlacademy/codeguide).  

`.eslintrc` - конфиг для проверки js [eslint](https://eslint.org/).  
`.eslintignore` - здесь указываются файлы/папки, которые будут игнорироваться.  
`.htmlhintrc` - конфиг для проверки html [htmlhint](https://htmlhint.com/).  
`.stylelintrc` - конфиг для проверки scss [stylelint](https://stylelint.io/).  